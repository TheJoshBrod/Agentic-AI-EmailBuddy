import {__jacJsx, __jacSpawn} from "@jac-client/utils";
import { useState, useEffect, useRef } from "react";
import "./modern-styles.css";
import { Container, Box, Paper, TextField, Button, Typography, IconButton, Chip, Stack, Avatar, Divider, Fade, CircularProgress, ThemeProvider, createTheme, CssBaseline, Card, CardContent, Grow, Slide, Tooltip } from "@mui/material";
import { Send, School, Psychology, AutoAwesome, Clear, Lightbulb, MenuBook, Science, Calculate, EmojiObjects } from "@mui/icons-material";
const theme = createTheme({"palette": {"mode": "dark", "primary": {"main": "#a78bfa", "light": "#c4b5fd", "dark": "#8b5cf6"}, "secondary": {"main": "#f472b6", "light": "#f9a8d4", "dark": "#ec4899"}, "background": {"default": "#0f172a", "paper": "rgba(30, 41, 59, 0.7)"}, "text": {"primary": "#f8fafc", "secondary": "#cbd5e1"}}, "typography": {"fontFamily": "'Outfit', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif", "h3": {"fontWeight": 800, "letterSpacing": "-0.02em"}, "h5": {"fontWeight": 700}, "h6": {"fontWeight": 600}}, "shape": {"borderRadius": 20}, "components": {"MuiButton": {"styleOverrides": {"root": {"textTransform": "none", "fontWeight": 600, "borderRadius": "16px"}}}}});
function app() {
  let [message, setMessage] = useState("");
  let [conversationHistory, setConversationHistory] = useState([]);
  let [loading, setLoading] = useState(false);
  let messagesEndRef = useRef(null);
  async function handleChat() {
    if (!message.trim()) {
      return;
    }
    let messageText = message.trim();
    setMessage("");
    setLoading(true);
    let newHistory = conversationHistory.concat([{"role": "user", "content": messageText, "timestamp": Date.now()}]);
    setConversationHistory(newHistory);
    let result = await __jacSpawn("chat_tutor", "", {"message": messageText, "context": []});
    if (result && result.reports && result.reports.length > 0) {
      let aiResponse = result.reports[0]["response"];
      let finalHistory = newHistory.concat([{"role": "assistant", "content": aiResponse, "timestamp": Date.now()}]);
      setConversationHistory(finalHistory);
    }
    setLoading(false);
  }
  function handleKeyPress(e) {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      handleChat();
    }
  }
  function clearChat() {
    setConversationHistory([]);
    setMessage("");
  }
  let exampleQuestions = ["Explain photosynthesis in simple terms", "Help me understand quantum mechanics", "What's the difference between mitosis and meiosis?", "How do I solve quadratic equations?"];
  return __jacJsx(ThemeProvider, {"theme": theme}, [__jacJsx(CssBaseline, {}, []), __jacJsx("div", {"className": "animated-bg"}, [__jacJsx("div", {"className": "particle particle-1"}, []), __jacJsx("div", {"className": "particle particle-2"}, []), __jacJsx("div", {"className": "particle particle-3"}, []), __jacJsx("div", {"className": "particle particle-4"}, [])]), __jacJsx(Box, {"sx": {"minHeight": "100vh", "py": 3, "position": "relative"}}, [__jacJsx(Container, {"maxWidth": "lg"}, [__jacJsx(Stack, {"spacing": 3}, [__jacJsx(Grow, {"in": true, "timeout": 800}, [__jacJsx(Paper, {"className": "glass-card glow", "elevation": 0, "sx": {"p": 4, "borderRadius": 4}}, [__jacJsx(Stack, {"direction": "row", "alignItems": "center", "spacing": 2, "justifyContent": "center"}, [__jacJsx(Avatar, {"sx": {"width": 64, "height": 64, "background": "linear-gradient(135deg, #a78bfa 0%, #f472b6 100%)", "boxShadow": "0 8px 32px rgba(167, 139, 250, 0.4)"}}, [__jacJsx(School, {"sx": {"fontSize": 36}}, [])]), __jacJsx(Box, {}, [__jacJsx(Typography, {"variant": "h3", "sx": {"background": "linear-gradient(135deg, #c4b5fd 0%, #f9a8d4 100%)", "WebkitBackgroundClip": "text", "WebkitTextFillColor": "transparent", "backgroundClip": "text", "textShadow": "0 0 40px rgba(167, 139, 250, 0.3)"}}, ["Smart Learning Companion"]), __jacJsx(Stack, {"direction": "row", "spacing": 1, "alignItems": "center", "sx": {"mt": 1}}, [__jacJsx(Psychology, {"sx": {"fontSize": 20, "color": "secondary.main"}}, []), __jacJsx(Typography, {"variant": "subtitle1", "color": "text.secondary", "sx": {"fontWeight": 500}}, ["Your AI-Powered Study Assistant"])])])])])]), __jacJsx(Grow, {"in": true, "timeout": 1000}, [__jacJsx(Paper, {"className": "glass-card", "elevation": 0, "sx": {"height": "calc(100vh - 300px)", "minHeight": "600px", "display": "flex", "flexDirection": "column", "overflow": "hidden", "borderRadius": 4}}, [__jacJsx(Stack, {"direction": "row", "alignItems": "center", "spacing": 2, "justifyContent": "center"}, [__jacJsx(School, {"sx": {"fontSize": 48, "color": "primary.main"}}, []), __jacJsx(Box, {}, [__jacJsx(Typography, {"variant": "h3", "sx": {"background": "linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)", "WebkitBackgroundClip": "text", "WebkitTextFillColor": "transparent", "backgroundClip": "text"}}, ["Smart Learning Companion"]), __jacJsx(Typography, {"variant": "subtitle1", "color": "text.secondary", "sx": {"fontWeight": 500}}, ["Your AI-Powered Study Assistant"])])])])]), __jacJsx(Fade, {"in": true, "timeout": 800}, [__jacJsx(Paper, {"elevation": 4, "sx": {"height": "calc(100vh - 300px)", "minHeight": "600px", "display": "flex", "flexDirection": "column", "background": "rgba(255, 255, 255, 0.98)", "backdropFilter": "blur(20px)", "borderRadius": 4, "overflow": "hidden"}}, [__jacJsx(Box, {"sx": {"p": 3, "borderBottom": "1px solid rgba(167, 139, 250, 0.2)", "background": "linear-gradient(90deg, rgba(167, 139, 250, 0.1) 0%, rgba(244, 114, 182, 0.1) 100%)", "backdropFilter": "blur(10px)"}}, [__jacJsx(Stack, {"direction": "row", "justifyContent": "space-between", "alignItems": "center"}, [__jacJsx(Stack, {"direction": "row", "spacing": 1, "alignItems": "center"}, [__jacJsx(Psychology, {"color": "primary"}, []), __jacJsx(Typography, {"variant": "h5", "color": "primary"}, ["AI Tutor Chat"])]), conversationHistory.length > 0 ? __jacJsx(Button, {"variant": "outlined", "color": "error", "startIcon": __jacJsx(Clear, {}, []), "onClick": clearChat, "sx": {"borderRadius": 2}}, ["Clear Chat"]) : null])]), __jacJsx(Box, {"sx": {"flex": 1, "overflowY": "auto", "p": 3, "background": "transparent"}}, [conversationHistory.length > 0 ? __jacJsx(Stack, {"spacing": 2}, [conversationHistory.map(msg => {
    let isUser = msg["role"] === "user";
    return __jacJsx(Box, {"sx": {"display": "flex", "justifyContent": isUser ? "flex-end" : "flex-start", "mb": 2}, "key": msg["timestamp"]}, [__jacJsx(Fade, {"in": true, "timeout": 300}, [__jacJsx(Card, {"className": isUser ? "message-slide-right" : "message-slide-left", "sx": {"maxWidth": "75%", "background": isUser ? "linear-gradient(135deg, #a78bfa 0%, #f472b6 100%)" : "rgba(30, 41, 59, 0.8)", "color": "white", "backdropFilter": "blur(20px)", "border": isUser ? "1px solid rgba(167, 139, 250, 0.3)" : "1px solid rgba(203, 213, 225, 0.2)", "boxShadow": isUser ? "0 8px 32px rgba(167, 139, 250, 0.3)" : "0 8px 32px rgba(0, 0, 0, 0.2)", "borderRadius": 4, "borderBottomRightRadius": isUser ? 1 : 4, "borderBottomLeftRadius": isUser ? 4 : 1}}, [__jacJsx(CardContent, {}, [__jacJsx(Stack, {"spacing": 1}, [__jacJsx(Stack, {"direction": "row", "spacing": 1, "alignItems": "center"}, [__jacJsx(Avatar, {"sx": {"width": 32, "height": 32, "bgcolor": isUser ? "rgba(255,255,255,0.2)" : "rgba(167, 139, 250, 0.3)", "border": "2px solid rgba(255,255,255,0.3)"}}, [isUser ? "You" : __jacJsx(AutoAwesome, {"sx": {"fontSize": 18}}, [])]), __jacJsx(Typography, {"variant": "caption", "sx": {"fontWeight": 700, "textTransform": "uppercase", "letterSpacing": "0.05em", "opacity": 0.9}}, [isUser ? "You" : "AI Tutor"])]), __jacJsx(Typography, {"variant": "body1", "sx": {"whiteSpace": "pre-wrap", "wordWrap": "break-word", "lineHeight": 1.6}}, [msg["content"]])])])])])]);
  }), loading ? __jacJsx(Fade, {"in": true, "timeout": 300}, [__jacJsx(Box, {"sx": {"display": "flex", "justifyContent": "flex-start"}}, [__jacJsx(Card, {"sx": {"maxWidth": "75%", "background": "#ffffff", "boxShadow": 3, "borderRadius": 3}}, [__jacJsx(CardContent, {}, [__jacJsx(Stack, {"direction": "row", "spacing": 2, "alignItems": "center"}, [__jacJsx(CircularProgress, {"size": 24}, []), __jacJsx(Typography, {"variant": "body1", "color": "text.secondary"}, ["AI is thinking..."])])])])])]) : null, __jacJsx("div", {"ref": messagesEndRef}, [])]) : __jacJsx(Box, {"sx": {"display": "flex", "flexDirection": "column", "alignItems": "center", "justifyContent": "center", "height": "100%", "textAlign": "center"}}, [__jacJsx(Fade, {"in": true, "timeout": 500}, [__jacJsx(Box, {}, [__jacJsx(Psychology, {"className": "pulse", "sx": {"fontSize": 120, "color": "primary.main", "opacity": 0.3, "mb": 3, "filter": "drop-shadow(0 0 30px rgba(167, 139, 250, 0.3))"}}, []), __jacJsx(Typography, {"variant": "h4", "gutterBottom": true, "sx": {"fontWeight": 700, "color": "primary.main"}}, ["Start a Conversation"]), __jacJsx(Typography, {"variant": "body1", "color": "text.secondary", "sx": {"mb": 4, "maxWidth": 500}}, ["Ask me anything about your studies! I'm here to help you learn and understand complex topics."]), __jacJsx(Box, {"sx": {"maxWidth": 600, "mx": "auto"}}, [__jacJsx(Typography, {"variant": "h6", "sx": {"mb": 2, "color": "primary.main", "fontWeight": 600}}, ["Try asking:"]), __jacJsx(Stack, {"spacing": 1.5}, [exampleQuestions.map(question => {
    return __jacJsx(Chip, {"key": question, "label": question, "icon": __jacJsx(AutoAwesome, {}, []), "onClick": () => {
      setMessage(question);
    }, "sx": {"py": 2.5, "px": 1, "fontSize": "0.95rem", "cursor": "pointer", "transition": "all 0.2s", "&:hover": {"transform": "translateX(8px)", "boxShadow": 2}}, "color": "primary", "variant": "outlined"}, []);
  })])])])])])]), __jacJsx(Divider, {"sx": {"borderColor": "rgba(167, 139, 250, 0.2)"}}, []), __jacJsx(Box, {"sx": {"p": 3, "background": "rgba(15, 23, 42, 0.5)", "backdropFilter": "blur(10px)"}}, [__jacJsx(Stack, {"spacing": 2}, [__jacJsx(TextField, {"fullWidth": true, "multiline": true, "rows": 3, "value": message, "onChange": e => {
    setMessage(e.target.value);
  }, "onKeyPress": handleKeyPress, "placeholder": "Type your question here... (Shift+Enter for new line, Enter to send)", "disabled": loading, "variant": "outlined", "sx": {"& .MuiOutlinedInput-root": {"borderRadius": 3, "fontSize": "1rem", "&:hover fieldset": {"borderColor": "primary.main", "borderWidth": 2}, "&.Mui-focused fieldset": {"borderWidth": 2}}}}, []), __jacJsx(Button, {"fullWidth": true, "variant": "contained", "size": "large", "onClick": handleChat, "disabled": loading || !message.trim(), "startIcon": loading ? __jacJsx(CircularProgress, {"size": 20, "sx": {"color": "white"}}, []) : __jacJsx(Send, {}, []), "sx": {"py": 1.5, "fontSize": "1.1rem", "fontWeight": 600, "borderRadius": 3, "textTransform": "none", "background": "linear-gradient(135deg, #a78bfa 0%, #f472b6 100%)", "boxShadow": "0 8px 32px rgba(167, 139, 250, 0.4)", "&:hover": {"background": "linear-gradient(135deg, #c4b5fd 0%, #f9a8d4 100%)", "transform": "translateY(-2px)", "boxShadow": "0 12px 40px rgba(167, 139, 250, 0.5)"}, "&:active": {"transform": "translateY(0)"}, "transition": "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}, [loading ? "Thinking..." : "Ask Question"])])])])]), __jacJsx(Typography, {"variant": "body2", "align": "center", "sx": {"color": "rgba(248, 250, 252, 0.7)", "fontWeight": 500, "textShadow": "0 0 20px rgba(167, 139, 250, 0.3)"}}, ["\u26a1 Powered by GPT-4o \u2022 Built with Jaclang & Material-UI"])])])])]);
}
export { app };
